<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyBoard Reaction Test</title>
    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="flex flex-col h-screen bg-yellow-300">
    <header class="text-gray-600 body-font bg-transparent">
        <div class="container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center">
          <a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0">
            <div class="p-4 bg-red-100 rounded-full">
                <svg background="red" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-keyboard" viewBox="0 0 16 16">
                    <path d="M14 5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zM2 4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/>
                    <path d="M13 10.25a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm0-2a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-5 0A.25.25 0 0 1 8.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 8 8.75zm2 0a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25zm1 2a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-5-2A.25.25 0 0 1 6.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 6 8.75zm-2 0A.25.25 0 0 1 4.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 4 8.75zm-2 0A.25.25 0 0 1 2.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 2 8.75zm11-2a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-2 0a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-2 0A.25.25 0 0 1 9.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 9 6.75zm-2 0A.25.25 0 0 1 7.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 7 6.75zm-2 0A.25.25 0 0 1 5.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 5 6.75zm-3 0A.25.25 0 0 1 2.25 6h1.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-1.5A.25.25 0 0 1 2 6.75zm0 4a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm2 0a.25.25 0 0 1 .25-.25h5.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-5.5a.25.25 0 0 1-.25-.25z"/>
                  </svg>
            </div>
            <span class="ml-3 text-xl">Click Reaction Test</span>
          </a>
          <nav class="md:ml-auto flex flex-wrap items-center text-base justify-center">
            <a class="mr-5 hover:text-gray-900" href="KeyboardReactionTest/">Home</a>
            <a class="mr-5 hover:text-gray-900" href="KeyboardReactionTest/about.html">About</a>
            <a class="mr-5 hover:text-gray-900" href="KeyboardReactionTest/contact.html">Contact</a>
            <a class="mr-5 hover:text-gray-900" href="https://github.com/diy-it-all">Github</a>
          </nav>
        </div>
      </header> 
      <div class="grow bg-yellow-200 flex justify-center items-center">
        
        <p id="main_text" class="font-black text-[rgba(0,0,0,0.3)] text-[20vmin] font-mono">Enter</p>
      </div>

      <script>

        if(window.location.search.includes("lost=True")){
          console.log(document.body.children[1])
          document.body.children[1].innerHTML = `
          <div class="text-center">
          <p>You Lost!, Score-> ${window.sessionStorage.getItem("score")}</p>
          <p>Max Score-> ${window.localStorage.getItem("max_score")}</p>
          <br/>
          <button class="p-4 rounded bg-green-400 hover:bg-green-600" onclick="location.replace('KeyboardReactionTest/')" autofocus>Try Again</button>
          </div>
          `
        }
        


        let elt = document.querySelector("#main_text")
        let keys = [];
        let score = 0;
        let timer = setTimeout(()=>{window.location.replace("KeyboardReactionTest/lost=True")}, 1000)
        for(let i = 33; i <=126; i++){
          keys[keys.length] = String.fromCharCode(i)
        }
        document.addEventListener("keypress", (ev)=>{
          console.log(ev.key);
          if(ev.key == elt.innerText){
            elt.innerText = keys[Math.floor(Math.random() * (keys.length+1))]
            score += 1
            clearTimeout(timer)
            timer = setTimeout(()=>{window.location.replace("KeyboardReactionTest/lost=True")}, 1000)
          }else{
            window.localStorage.setItem("max_score", Math.max(window.localStorage.getItem("Max Score"), score))
            window.sessionStorage.setItem("score", score);
            window.location.replace("KeyboardReactionTest/?lost=True")
          }
        })
      </script>
</body>
</html>